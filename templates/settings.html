<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - AffiliateBot Pro</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; min-height: 100vh; }
        
        .navbar { background: rgba(0,0,0,0.2); padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; backdrop-filter: blur(10px); }
        .logo { font-size: 24px; font-weight: bold; }
        .nav-links { display: flex; gap: 20px; }
        .nav-links a { color: white; text-decoration: none; padding: 8px 16px; border-radius: 20px; transition: all 0.3s; }
        .nav-links a:hover { background: rgba(255,255,255,0.2); }
        
        .container { max-width: 1000px; margin: 0 auto; padding: 30px; }
        .page-header { text-align: center; margin-bottom: 40px; }
        .page-header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .page-header p { font-size: 1.2rem; opacity: 0.9; }
        
        .settings-grid { display: grid; gap: 30px; }
        .settings-panel { background: rgba(255,255,255,0.1); border-radius: 20px; padding: 30px; backdrop-filter: blur(10px); }
        .panel-title { font-size: 1.5rem; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: bold; }
        .form-input { width: 100%; padding: 12px; border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; background: rgba(255,255,255,0.1); color: white; }
        .form-input::placeholder { color: rgba(255,255,255,0.7); }
        
        .platform-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; margin-bottom: 15px; }
        .platform-status { padding: 6px 12px; border-radius: 15px; font-size: 0.8rem; }
        .status-connected { background: #4CAF50; color: white; }
        .status-disconnected { background: #f44336; color: white; }
        
        .btn { background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 12px 25px; border: none; border-radius: 25px; cursor: pointer; font-size: 1rem; }
        .btn:hover { transform: translateY(-2px); }
        .btn-secondary { background: rgba(255,255,255,0.2); }
        
        .back-btn { background: rgba(255,255,255,0.2); color: white; padding: 12px 25px; border: none; border-radius: 25px; text-decoration: none; margin-bottom: 30px; display: inline-block; }
        .back-btn:hover { background: rgba(255,255,255,0.3); }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">ü§ñ AffiliateBot Pro</div>
        <div class="nav-links">
            <a href="/user-dashboard">Dashboard</a>
            <a href="/products">Products</a>
            <a href="/logout" style="background: #f44336; color: white; padding: 8px 16px; border-radius: 20px;">Logout</a>
        </div>
    </nav>

    <div class="container">
        <a href="/user-dashboard" class="back-btn">‚Üê Back to Dashboard</a>
        
        <div class="page-header">
            <h1>‚öôÔ∏è Account Settings</h1>
            <p>Configure your affiliate links, platforms, and automation preferences</p>
        </div>

        <div class="settings-grid">
            <div class="settings-panel">
                <div class="panel-title">üíº Amazon Affiliate Settings</div>
                <div class="form-group">
                    <label class="form-label">Amazon Affiliate ID</label>
                    <input type="text" class="form-input" placeholder="your-affiliate-id-20" value="luxoraconnect-20">
                </div>
                <div class="form-group">
                    <label class="form-label">Affiliate Link Base</label>
                    <input type="text" class="form-input" placeholder="amzn.to/xxxxxxx" value="amzn.to/44TOVc2">
                </div>
                <button class="btn">üíæ Save Affiliate Settings</button>
            </div>

            <div class="settings-panel">
                <div class="panel-title">üîó Platform Connections</div>
                <div class="platform-item">
                    <span>üì± Discord</span>
                    <div>
                        {% if platform_status.discord %}
                        <span class="platform-status status-connected">Connected</span>
                        <button class="btn btn-secondary" style="margin-left: 10px;">Configure</button>
                        {% else %}
                        <span class="platform-status status-disconnected">Not Connected</span>
                        <button class="btn" style="margin-left: 10px;">Connect</button>
                        {% endif %}
                    </div>
                </div>
                <div class="platform-item">
                    <span>üìß Telegram</span>
                    <div>
                        {% if platform_status.telegram %}
                        <span class="platform-status status-connected">Connected</span>
                        <button class="btn btn-secondary" style="margin-left: 10px;">Configure</button>
                        {% else %}
                        <span class="platform-status status-disconnected">Not Connected</span>
                        <button class="btn" style="margin-left: 10px;">Connect</button>
                        {% endif %}
                    </div>
                </div>
                <div class="platform-item">
                    <span>üíº Slack</span>
                    <div>
                        {% if platform_status.slack %}
                        <span class="platform-status status-connected">Connected</span>
                        <button class="btn btn-secondary" style="margin-left: 10px;">Configure</button>
                        {% else %}
                        <span class="platform-status status-disconnected">Not Connected</span>
                        <button class="btn" style="margin-left: 10px;">Connect</button>
                        {% endif %}
                    </div>
                </div>
                <div class="platform-item">
                    <span>üìß Email</span>
                    <div>
                        <span class="platform-status status-disconnected">Setup Required</span>
                        <button class="btn" style="margin-left: 10px;" onclick="showEmailConfig()">Configure Email</button>
                    </div>
                </div>
                <div class="platform-item">
                    <span>üìå Pinterest</span>
                    <div>
                        <span class="platform-status status-disconnected">Setup Required</span>
                        <button class="btn" style="margin-left: 10px;" onclick="showPinterestConfig()">Configure Pinterest</button>
                    </div>
                </div>
                <div class="platform-item">
                    <span>üî¥ Reddit</span>
                    <div>
                        <span class="platform-status status-disconnected">Setup Required</span>
                        <button class="btn" style="margin-left: 10px;" onclick="showRedditConfig()">Configure Reddit</button>
                    </div>
                </div>
                <div class="platform-item">
                    <span>üìò Facebook</span>
                    <div>
                        <span class="platform-status status-disconnected">Setup Required</span>
                        <button class="btn" style="margin-left: 10px;" onclick="showFacebookConfig()">Configure Facebook</button>
                    </div>
                </div>
                <div class="platform-item">
                    <span>üê¶ Twitter/X</span>
                    <div>
                        <span class="platform-status status-disconnected">Setup Required</span>
                        <button class="btn" style="margin-left: 10px;" onclick="showTwitterConfig()">Configure Twitter/X</button>
                    </div>
                </div>
                <div class="platform-item">
                    <span>üì∏ Instagram</span>
                    <div>
                        <span class="platform-status status-disconnected">Setup Required</span>
                        <button class="btn" style="margin-left: 10px;" onclick="showInstagramConfig()">Configure Instagram</button>
                    </div>
                </div>
                <div class="platform-item">
                    <span>üíº LinkedIn</span>
                    <div>
                        <span class="platform-status status-disconnected">Setup Required</span>
                        <button class="btn" style="margin-left: 10px;" onclick="showLinkedInConfig()">Configure LinkedIn</button>
                    </div>
                </div>
                <div class="platform-item">
                    <span>üì± Telegram</span>
                    <div>
                        <span class="platform-status status-disconnected">Setup Required</span>
                        <button class="btn" style="margin-left: 10px;" onclick="showTelegramConfig()">Configure Telegram</button>
                    </div>
                </div>
            </div>

            <div class="settings-panel">
                <div class="panel-title">ü§ñ Automation Settings</div>
                <div class="form-group">
                    <label class="form-label">Auto-Post Frequency</label>
                    <select class="form-input" style="color: #333; background: white; font-size: 16px; padding: 12px;">
                        {% if current_user.subscription_tier == 'admin' or current_user.subscription_tier == 'pro' %}
                        <option value="30min">Every 30 minutes</option>
                        <option value="1h">Every 1 hour</option>
                        <option value="2h">Every 2 hours</option>
                        <option value="3h">Every 3 hours</option>
                        <option value="4h">Every 4 hours</option>
                        <option value="5h">Every 5 hours</option>
                        <option value="6h">Every 6 hours</option>
                        <option value="7h">Every 7 hours</option>
                        <option value="8h">Every 8 hours</option>
                        <option value="9h">Every 9 hours</option>
                        <option value="10h">Every 10 hours</option>
                        <option value="11h">Every 11 hours</option>
                        <option value="12h">Every 12 hours</option>
                        {% elif current_user.subscription_tier == 'premium' %}
                        <option value="2h">Every 2 hours</option>
                        <option value="3h">Every 3 hours</option>
                        <option value="4h">Every 4 hours</option>
                        <option value="6h">Every 6 hours</option>
                        <option value="8h">Every 8 hours</option>
                        <option value="12h">Every 12 hours</option>
                        {% else %}
                        <option value="5h">Every 5 hours</option>
                        <option value="12h">Every 12 hours</option>
                        {% endif %}
                        <option value="disabled">Disabled</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" style="margin-right: 10px;">
                        Enable AI Product Selection
                    </label>
                </div>
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" style="margin-right: 10px;" checked>
                        Email Notifications
                    </label>
                </div>
                <button class="btn">üöÄ Save Automation Settings</button>
            </div>

            <div class="settings-panel">
                <div class="panel-title">üí≥ Subscription & Billing</div>
                <p style="margin-bottom: 20px;">Current Plan: <strong>{{ current_user.subscription_tier|title }}</strong> ‚úÖ</p>
                <p style="margin-bottom: 20px;">Posts per day: <strong>
                    {% if current_user.subscription_tier == 'free' %}2{% endif %}
                    {% if current_user.subscription_tier == 'premium' %}8{% endif %}
                    {% if current_user.subscription_tier == 'pro' %}24{% endif %}
                </strong></p>
                <p style="margin-bottom: 20px; color: #4CAF50;">Your subscription is active and ready to earn commissions!</p>
                {% if current_user.subscription_tier != 'pro' %}
                <button class="btn btn-secondary" onclick="location.href='/subscribe'">üíé Upgrade to 
                    {% if current_user.subscription_tier == 'free' %}Premium (8 posts/day){% else %}Pro (24 posts/day){% endif %}
                </button>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Email Configuration Modal -->
    <div id="emailModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 15px; width: 500px; color: #333;">
            <h3>üìß Email Configuration</h3>
            <div style="margin: 15px 0;">
                <label>Your Email Address:</label>
                <input type="email" id="userEmail" placeholder="your@email.com" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Email List (comma separated):</label>
                <textarea id="emailList" placeholder="friend1@example.com, friend2@example.com, family@example.com" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px; height: 80px;"></textarea>
            </div>
            <div style="font-size: 14px; color: #666; margin: 10px 0;">
                Products will be shared via email to your list when auto-posting is enabled.
            </div>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button onclick="saveEmailConfig()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Save Email Settings</button>
                <button onclick="hideEmailConfig()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Pinterest Configuration Modal -->
    <div id="pinterestModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 15px; width: 500px; color: #333;">
            <h3>üìå Pinterest Configuration</h3>
            <div style="margin: 15px 0;">
                <label>Pinterest Access Token:</label>
                <input type="password" id="pinterestToken" placeholder="Enter your Pinterest access token" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Board ID:</label>
                <input type="text" id="boardId" placeholder="Enter your Pinterest board ID" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="font-size: 14px; color: #666; margin: 10px 0;">
                Need help? Visit <a href="https://developers.pinterest.com/tools/access_token/" target="_blank">Pinterest Developer Tools</a> to get your access token.
            </div>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button onclick="savePinterestConfig()" style="background: #E60023; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Save Pinterest Settings</button>
                <button onclick="hidePinterestConfig()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        function showEmailConfig() {
            document.getElementById('emailModal').style.display = 'block';
        }
        
        function hideEmailConfig() {
            document.getElementById('emailModal').style.display = 'none';
        }
        
        function saveEmailConfig() {
            const userEmail = document.getElementById('userEmail').value;
            const emailList = document.getElementById('emailList').value;
            
            const formData = new FormData();
            formData.append('user_email', userEmail);
            formData.append('email_list', emailList);
            
            fetch('/api/save-email-config', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update the email platform status to show it's configured
                    // Find email platform item by searching through all platform items
                    const platformItems = document.querySelectorAll('.platform-item');
                    for (let item of platformItems) {
                        if (item.innerHTML.includes('üìß Email')) {
                            item.querySelector('.platform-status').className = 'platform-status status-connected';
                            item.querySelector('.platform-status').textContent = 'Configured';
                            item.querySelector('button').textContent = 'Update Email';
                            item.querySelector('button').className = 'btn btn-secondary';
                            break;
                        }
                    }
                    hideEmailConfig();
                } else {
                    console.error('Error: ' + data.error);
                    alert('Error saving email: ' + data.error);
                }
            })
            .catch(error => {
                console.error('Error saving email settings:', error);
                alert('Error saving email settings');
            });
        }
        
        function showPinterestConfig() {
            document.getElementById('pinterestModal').style.display = 'block';
        }
        
        function hidePinterestConfig() {
            document.getElementById('pinterestModal').style.display = 'none';
        }
        
        function savePinterestConfig() {
            const pinterestToken = document.getElementById('pinterestToken').value;
            const boardId = document.getElementById('boardId').value;
            
            fetch('/api/save-pinterest-config', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    access_token: pinterestToken,
                    board_id: boardId
                })
            })
            .then(response => response.json())
            .then(data => {
                hidePinterestConfig();
                location.reload();
            });
        }
        
        function showRedditConfig() {
            document.getElementById('redditModal').style.display = 'block';
        }
        
        function hideRedditConfig() {
            document.getElementById('redditModal').style.display = 'none';
        }
        
        function saveRedditConfig() {
            const clientId = document.getElementById('redditClientId').value;
            const clientSecret = document.getElementById('redditClientSecret').value;
            const username = document.getElementById('redditUsername').value;
            const password = document.getElementById('redditPassword').value;
            
            const formData = new FormData();
            formData.append('client_id', clientId);
            formData.append('client_secret', clientSecret);
            formData.append('username', username);
            formData.append('password', password);
            
            fetch('/api/save-reddit-config', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                hideRedditConfig();
                location.reload();
            });
        }
    </script>

    <!-- Reddit Configuration Modal -->
    <div id="redditModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 15px; width: 500px; color: #333;">
            <h3>üî¥ Reddit Configuration</h3>
            <div style="margin: 15px 0;">
                <label>Reddit Client ID:</label>
                <input type="text" id="redditClientId" placeholder="Your Reddit app client ID" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Reddit Client Secret:</label>
                <input type="password" id="redditClientSecret" placeholder="Your Reddit app client secret" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Reddit Username:</label>
                <input type="text" id="redditUsername" placeholder="Your Reddit username" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Reddit Password:</label>
                <input type="password" id="redditPassword" placeholder="Your Reddit password" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="font-size: 14px; color: #666; margin: 10px 0;">
                Create a Reddit app at reddit.com/prefs/apps to get your credentials.
            </div>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button onclick="saveRedditConfig()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Save Reddit Settings</button>
                <button onclick="hideRedditConfig()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Facebook Configuration Modal -->
    <div id="facebookModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <h3>Configure Facebook</h3>
            <div style="margin: 15px 0;">
                <label>Page Access Token:</label>
                <input type="text" id="facebookToken" placeholder="Your Facebook Page Access Token" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Page ID:</label>
                <input type="text" id="facebookPageId" placeholder="Your Facebook Page ID" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button onclick="saveFacebookConfig()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Save Facebook Settings</button>
                <button onclick="hideFacebookConfig()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Twitter/X Configuration Modal -->
    <div id="twitterModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <h3>Configure Twitter/X</h3>
            <div style="margin: 15px 0;">
                <label>API Key:</label>
                <input type="text" id="twitterApiKey" placeholder="Your Twitter API Key" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>API Secret:</label>
                <input type="password" id="twitterApiSecret" placeholder="Your Twitter API Secret" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Access Token:</label>
                <input type="text" id="twitterAccessToken" placeholder="Your Twitter Access Token" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Access Token Secret:</label>
                <input type="password" id="twitterAccessSecret" placeholder="Your Twitter Access Token Secret" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button onclick="saveTwitterConfig()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Save Twitter/X Settings</button>
                <button onclick="hideTwitterConfig()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Instagram Configuration Modal -->
    <div id="instagramModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <h3>Configure Instagram</h3>
            <div style="margin: 15px 0;">
                <label>Access Token:</label>
                <input type="text" id="instagramToken" placeholder="Your Instagram Access Token" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>User ID:</label>
                <input type="text" id="instagramUserId" placeholder="Your Instagram User ID" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button onclick="saveInstagramConfig()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Save Instagram Settings</button>
                <button onclick="hideInstagramConfig()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- LinkedIn Configuration Modal -->
    <div id="linkedinModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <h3>Configure LinkedIn</h3>
            <div style="margin: 15px 0;">
                <label>Access Token:</label>
                <input type="text" id="linkedinToken" placeholder="Your LinkedIn Access Token" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Person ID:</label>
                <input type="text" id="linkedinPersonId" placeholder="Your LinkedIn Person ID" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button onclick="saveLinkedInConfig()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Save LinkedIn Settings</button>
                <button onclick="hideLinkedInConfig()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Telegram Configuration Modal -->
    <div id="telegramModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <h3>Configure Telegram</h3>
            <div style="margin: 15px 0;">
                <label>Bot Token:</label>
                <input type="text" id="telegramToken" placeholder="Your Telegram Bot Token" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="margin: 15px 0;">
                <label>Chat ID:</label>
                <input type="text" id="telegramChatId" placeholder="Your Telegram Chat ID" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            </div>
            <div style="display: flex; gap: 15px; margin-top: 20px;">
                <button onclick="saveTelegramConfig()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Save Telegram Settings</button>
                <button onclick="hideTelegramConfig()" style="background: #666; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Check and display existing configurations when page loads
        window.onload = function() {
            checkExistingConfigurations();
        };
        
        function checkExistingConfigurations() {
            fetch('/api/get-platform-status')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const platformItems = document.querySelectorAll('.platform-item');
                    
                    // Update each platform based on stored configuration
                    for (let item of platformItems) {
                        if (item.innerHTML.includes('üìß Email') && data.email_configured) {
                            item.querySelector('.platform-status').className = 'platform-status status-connected';
                            item.querySelector('.platform-status').textContent = 'Configured';
                            item.querySelector('button').textContent = 'Update Email';
                        }
                        if (item.innerHTML.includes('üìò Facebook') && data.facebook_configured) {
                            item.querySelector('.platform-status').className = 'platform-status status-connected';
                            item.querySelector('.platform-status').textContent = 'Connected';
                            item.querySelector('button').textContent = 'Update Facebook';
                        }
                        if (item.innerHTML.includes('üê¶ Twitter/X') && data.twitter_configured) {
                            item.querySelector('.platform-status').className = 'platform-status status-connected';
                            item.querySelector('.platform-status').textContent = 'Connected';
                            item.querySelector('button').textContent = 'Update Twitter/X';
                        }
                        if (item.innerHTML.includes('üì∏ Instagram') && data.instagram_configured) {
                            item.querySelector('.platform-status').className = 'platform-status status-connected';
                            item.querySelector('.platform-status').textContent = 'Connected';
                            item.querySelector('button').textContent = 'Update Instagram';
                        }
                        if (item.innerHTML.includes('üíº LinkedIn') && data.linkedin_configured) {
                            item.querySelector('.platform-status').className = 'platform-status status-connected';
                            item.querySelector('.platform-status').textContent = 'Connected';
                            item.querySelector('button').textContent = 'Update LinkedIn';
                        }
                        if (item.innerHTML.includes('üì± Telegram') && data.telegram_configured) {
                            item.querySelector('.platform-status').className = 'platform-status status-connected';
                            item.querySelector('.platform-status').textContent = 'Connected';
                            item.querySelector('button').textContent = 'Update Telegram';
                        }
                    }
                }
            })
            .catch(error => console.log('Could not check platform status:', error));
        }
        
        // Facebook Configuration Functions
        function showFacebookConfig() {
            document.getElementById('facebookModal').style.display = 'block';
        }
        
        function hideFacebookConfig() {
            document.getElementById('facebookModal').style.display = 'none';
        }
        
        function saveFacebookConfig() {
            const formData = new FormData();
            formData.append('page_access_token', document.getElementById('facebookToken').value);
            formData.append('page_id', document.getElementById('facebookPageId').value);
            
            fetch('/api/save-facebook-config', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const platformItems = document.querySelectorAll('.platform-item');
                    for (let item of platformItems) {
                        if (item.innerHTML.includes('üìò Facebook')) {
                            item.querySelector('.platform-status').className = 'platform-status status-connected';
                            item.querySelector('.platform-status').textContent = 'Connected';
                            item.querySelector('button').textContent = 'Update Facebook';
                            break;
                        }
                    }
                    hideFacebookConfig();
                } else {
                    alert('Error: ' + data.error);
                }
            });
        }

        // Twitter/X Configuration Functions
        function showTwitterConfig() {
            document.getElementById('twitterModal').style.display = 'block';
        }
        
        function hideTwitterConfig() {
            document.getElementById('twitterModal').style.display = 'none';
        }
        
        function saveTwitterConfig() {
            const formData = new FormData();
            formData.append('api_key', document.getElementById('twitterApiKey').value);
            formData.append('api_secret', document.getElementById('twitterApiSecret').value);
            formData.append('access_token', document.getElementById('twitterAccessToken').value);
            formData.append('access_token_secret', document.getElementById('twitterAccessSecret').value);
            
            fetch('/api/save-twitter-config', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const twitterPlatform = document.querySelector('.platform-item:has(span:contains("üê¶ Twitter/X"))');
                    if (twitterPlatform) {
                        twitterPlatform.querySelector('.platform-status').className = 'platform-status status-connected';
                        twitterPlatform.querySelector('.platform-status').textContent = 'Connected';
                        twitterPlatform.querySelector('button').textContent = 'Update Twitter/X';
                    }
                    hideTwitterConfig();
                } else {
                    alert('Error: ' + data.error);
                }
            });
        }

        // Instagram Configuration Functions
        function showInstagramConfig() {
            document.getElementById('instagramModal').style.display = 'block';
        }
        
        function hideInstagramConfig() {
            document.getElementById('instagramModal').style.display = 'none';
        }
        
        function saveInstagramConfig() {
            const formData = new FormData();
            formData.append('access_token', document.getElementById('instagramToken').value);
            formData.append('user_id', document.getElementById('instagramUserId').value);
            
            fetch('/api/save-instagram-config', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const instagramPlatform = document.querySelector('.platform-item:has(span:contains("üì∏ Instagram"))');
                    if (instagramPlatform) {
                        instagramPlatform.querySelector('.platform-status').className = 'platform-status status-connected';
                        instagramPlatform.querySelector('.platform-status').textContent = 'Connected';
                        instagramPlatform.querySelector('button').textContent = 'Update Instagram';
                    }
                    hideInstagramConfig();
                } else {
                    alert('Error: ' + data.error);
                }
            });
        }

        // LinkedIn Configuration Functions
        function showLinkedInConfig() {
            document.getElementById('linkedinModal').style.display = 'block';
        }
        
        function hideLinkedInConfig() {
            document.getElementById('linkedinModal').style.display = 'none';
        }
        
        function saveLinkedInConfig() {
            const formData = new FormData();
            formData.append('access_token', document.getElementById('linkedinToken').value);
            formData.append('person_id', document.getElementById('linkedinPersonId').value);
            
            fetch('/api/save-linkedin-config', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const linkedinPlatform = document.querySelector('.platform-item:has(span:contains("üíº LinkedIn"))');
                    if (linkedinPlatform) {
                        linkedinPlatform.querySelector('.platform-status').className = 'platform-status status-connected';
                        linkedinPlatform.querySelector('.platform-status').textContent = 'Connected';
                        linkedinPlatform.querySelector('button').textContent = 'Update LinkedIn';
                    }
                    hideLinkedInConfig();
                } else {
                    alert('Error: ' + data.error);
                }
            });
        }

        // Telegram Configuration Functions
        function showTelegramConfig() {
            document.getElementById('telegramModal').style.display = 'block';
        }
        
        function hideTelegramConfig() {
            document.getElementById('telegramModal').style.display = 'none';
        }
        
        function saveTelegramConfig() {
            const formData = new FormData();
            formData.append('bot_token', document.getElementById('telegramToken').value);
            formData.append('chat_id', document.getElementById('telegramChatId').value);
            
            fetch('/api/save-telegram-config', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const telegramPlatform = document.querySelector('.platform-item:has(span:contains("üì± Telegram"))');
                    if (telegramPlatform) {
                        telegramPlatform.querySelector('.platform-status').className = 'platform-status status-connected';
                        telegramPlatform.querySelector('.platform-status').textContent = 'Connected';
                        telegramPlatform.querySelector('button').textContent = 'Update Telegram';
                    }
                    hideTelegramConfig();
                } else {
                    alert('Error: ' + data.error);
                }
            });
        }
    </script>
</body>
</html>